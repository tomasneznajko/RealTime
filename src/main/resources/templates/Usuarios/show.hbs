<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/perf.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script>
        // compile the template
        var template = Handlebars.compile("Handlebars <b>{{doesWhat}}</b>");
        // execute the compiled template and print the output to the console
        console.log(template({ doesWhat: "rocks!" }));
    </script>


    <title>Perfil de usuario</title>
</head>
<body>


<section class="h-100 gradient-custom-2">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col col-lg-9 col-xl-7">
                <div class="card">
                    <div class="rounded-top text-white d-flex flex-row" style="background-color: #000; height:200px;">
                        <div class="ms-4 mt-5 d-flex flex-column" style="width: 150px;">

                            {{#if usuario.cantFotos}}
                                <img src="/{{usuario.fotos.[0]}}" alt="Foto del usuario" class="img-fluid img-thumbnail rounded mt-2 mb-2"
                                     style="width: 150px; height: 150px;">
                            {{else}}
                                <img src="/images/user.jpg" alt="Imagen predeterminada" class="img-fluid img-thumbnail rounded mt-2 mb-2"
                                     style="width: 150px; height: 150px;">
                            {{/if}}



                            <!--    <button type="button" class="btn btn-outline-dark" data-mdb-ripple-color="dark"
                                        style="z-index: 1;">
                                    Editar perfil
                                </button>   -->

                            <button type="button" class="btn btn-outline-dark" data-mdb-ripple-color="dark" style="z-index: 1;" id="editarPerfil" data-user-id="{{usuario.id}}">
                                Editar perfil
                            </button>


                        </div>
                        <div class="ms-3" style="margin-top: 130px;">
                            <h5>{{usuario.nombre}} {{usuario.apellido}}</h5>

                            <p>@{{usuario.usuario}}</p>
                        </div>
                    </div>

                    <div class="p-4 text-black" style="background-color: #f8f9fa;">
                        <div class="d-flex justify-content-end text-center py-1">
                            <div class="d-flex justify-content-end text-center py-1">

                                <div class="px-3">
                                    <p class="mb-1 h5">{{usuario.puntaje.valor}}</p>
                                    <p class="small text-muted mb-0">Puntaje</p>
                                </div>


                            </div>

                        </div>


                        <div class="ms-3 descripcion-usuario" style="margin-top: 20px;">
                            <p class="font-italic mb-0">{{usuario.descripcion}}</p>
                        </div>

                    </div>
                    <div class="card-body p-4 text-black">
                        <div class="mb-5">

                            <p class="lead fw-normal mb-1">Información</p>
                            <div class="p-4" style="background-color: #f8f9fa;">

                                <p class="font-italic mb-0"><strong>Rol:</strong> {{usuario.rol.nombre}}</p>

                                <p class="font-italic mb-0"><strong>Cantidad de intereses:</strong> {{usuario.cantIntereses}}</p>

                                {{#if usuario.medioDeNotificacion.codHarc}}
                                    <p class="font-italic mb-0"><strong>Medio de notificacion:</strong> telefono  </p>
                                {{else}}<p class="font-italic mb-0"><strong>Medio de notificacion:</strong> email</p>

                                {{/if}}


                                <p class="font-italic mb-0"><strong>Provincia:</strong> {{usuario.localizacion.provincia.nombre}}</p>
                                {{#if usuario.localizacion.municipio}}
                                    <p class="font-italic mb-0"><strong>Municipio:</strong> {{usuario.localizacion.municipio.nombre}}</p>
                                {{/if}}
                                {{#if usuario.localizacion.departamento}}
                                    <p class="font-italic mb-0"><strong>Departamento:</strong> {{usuario.localizacion.departamento.nombre}}</p>
                                {{/if}}
                                <p class="font-italic mb-0"><strong>Cantidad de comunidades:</strong> {{usuario.cantComunidades}}</p>
                            </div>

                        </div>




                    <div class="text-right">
                        <button id="botonRegresar" class="btn btn-secondary" >Regresar</button>
                    </div>


            </div>
        </div>
    </div>
</section>


<script src="../js/redi.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    document.getElementById('botonRegresar').addEventListener('click', function() {
        // Obtén la dirección de la página anterior y redirige a esa dirección
        var paginaAnterior = document.referrer;
        // Comprueba si la página anterior es la de edición (ajusta la condición según la URL real)
        if (paginaAnterior.includes('/editar')) {
            // Si la página anterior es la de edición, redirige al inicio
            window.location.href = '/comunidades';
        } else {
            // En otros casos, redirige a la página anterior como antes
            window.location.href = paginaAnterior;
        }
    });
</script>
</body>
</html>